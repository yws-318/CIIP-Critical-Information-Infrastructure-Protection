취약점 진단 및 보안 권고사항 제시

# 1. 버퍼 오버플로우

## 버퍼 오버플로(buffer overflow)란?
버퍼 오버플로(buffer overflow) 또는 버퍼 오버런(buffer overrun)은 메모리를 다루는 데에 오류가 발생하여, 잘못된 동작을 하는 프로그램 취약점이며, 컴퓨터 보안과 프로그래밍에서는 프로세스가 데이터를 버퍼에 저장할 때 프로그래머가 지정한 곳 바깥에 저장된 것을 의미한다.

![bufferoverflow](bufferoverflow.png) 

예를 들어, 버퍼란 그릇이 있고 물이 데이터라 했을 때, 물이 과도하게 들어와 컵의 공간에 맞지 않아 물이 넘치게 되어 발생하는 오류다. 

벗어난 데이터는 인접 메모리를 덮어 쓰게 되며 이때 다른 데이터가 포함되어 있을 수도 있는데,    
손상을 받을 수 있는 데이터는 프로그램 변수와 프로그램 흐름 제어 데이터도 포함된다.

이로 인해 잘못된 프로그램 거동이 나타날 수 있으며,
- 의도되지 않은 정보 노출
- 프로그램에 대한 비인가 접근 및 사용

등이 발생할 수 있다.

## 점검 방법
1. 로그인 페이지에서 계정 정보 입력 시 대량의 문자열을 입력하여 에러 페이지나 오류가 발생하는지 점검

2. 로그인 후 정보변경 페이지에서 가입 정보 수정 시 대량의 문자열을 입력하여 에러 페이지나 오류가 발생하는지 점검

3. 검색어 입력 시 대량의 문자열을 입력하여 에러 페이지나 오류가 발생하는지 점검

4. 게시글 작성 시 대량의 문자열을 입력하여 에러 페이지나 오류가 발생하는지 점검

5. URL 파라미터 값에 대량의 문자열 입력 시 에러 페이지나 오류가 발생하는지 점검

※ 텍스트 필드에 입력 값 검증(특수문자 제한, maxlength 등)이 설정된 경우 우회 시도 필요    
(예: 로컬 프록시를 사용하여 요청 시 파라미터 값에 대량의 문자열 직접 입력 등)

## 보안 권고사항
- 웹 서버, 웹 애플리케이션 서버 버전을 안정성이 검증된 최신 버전으로 패치
- 웹 애플리케이션에 전달되는 파라미터 값을 필요한 크기만큼만 받을 수 있도록 변경하고 입력 값 범위를 초과한 경우에도 에러 페이지를 반환하지 않도록 설정
- *동적 메모리 할당을 위해 \**크기를 사용하는 경우 그 \***값이 음수가 아닌지 검사하여 버퍼 오버플로우를 예방하는 형태로 소스 코드 변경
- 버퍼 오버플로우를 점검하는 웹 스캐닝 툴을 이용하여 주기적으로 점검

\*동적 메모리 할당 : 프로그램이 실행 중에 메모리를 필요로 할 때, malloc, calloc, realloc 등의 함수를 사용하여 메모리를 동적으로 할당하여 효율적으로 메모리를 사용할 수 있도록 하는 것이다.

\**크기를 사용하는 경우 : 동적 메모리 할당을 하기 위해서 `size_t size = \***;` 과 같이 size를 지정하는 상황을 의미한다.   
```
malloc 함수의 경우   
size_t size = ...;  // 할당할 메모리의 크기   
void *ptr = malloc(size);
```

\***값이 음수가 아닌지 검사 : 값이 음수면 안되는 이유는 메모리 할당 함수(malloc, calloc, realloc)는 양의 정수 크기를 요구한다. 음수 값을 전달하면 함수는 동작하지 않거나 예상할 수 없는 여러 문제를 초래할 수 있다. 크기가 음수 값이 되면 메모리 요청의 크기를 나타낼 수 없기 때문에 할당에 실패하게 된다.



## 간단 정리
- Web Server, WAS의 안전한 버전으로 패치
- 파라미터 값의 제한을 둔다. 제한 범위를 초과하는 경우는 에러 페이지를 반환하지 않게 설정
- 동적 메모리 할당을 할 때 크기 값이 음수가 아닌지 검사
- 웹 스캐닝 툴로 버퍼 오버플로우에 대해서 주기적 점검